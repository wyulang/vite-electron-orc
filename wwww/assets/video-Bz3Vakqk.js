import{d as C,u as N,r as S,c as a,a as o,t as p,w as B,v as V,b as f,e as $,f as U,g as D,y as u,h as L,j as R,o as l,F as I,i as P,n as q,k as E}from"./index-pQ6A5Kw_.js";import{_ as F}from"./load-iGttVXsz.js";const M={class:"w-all flex pl15 h-all fd-c pr5"},z={class:"flex h-33 pt10 ai-c"},J={class:"fs-13 fb"},K={class:"flex ai-c mt20 jc-c pr10"},O={class:"flex ai-c nodarg h-50 bb-d w-all"},A={key:0,class:"flex ai-c mr10"},G={class:"flex-1 bc-primay nodarg h-all"},H={class:"flex w-all fw"},Q=["onClick"],W={class:"pl10 pr10 fc-fff flex pt7 pb7 fs-16 ai-c ba-5 w-all"},X={class:"abs al10 fs-16 pp5 ba-5 ra-5 ab10 fc-fff"},Y=["onClick"],te=C({__name:"video",setup(Z){const{ipcRenderer:m}=window.require("electron"),g=R(),h=N(),e=S({serchText:"三年级数学上册",page:10,list:[],isNext:!1,scroll:0,isBotom:!1});function x(){if(!e.serchText.trim()){u.msg.error("请输入视频资料名称");return}c(10)}function _(t){const s={};return t.replace(/\?|#.*$/,"").replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),(d,n,r,i)=>{s[n]=i}),s}function b(t){h.play.url=t.src}function y(t){let s=JSON.parse(t.heji.compilation_ext);h.heji={compilationId:s.compilation_id,hejiNid:s.hejiNid,frsrcid:t.heji.frsrcid,lid:t.heji.lid,nid:t.heji.nid,referlid:t.heji.referlid,sign:t.heji.sign,page:0,count:t.heji.count},setTimeout(()=>{g.push("/video/heji")},10)}function v(t){if(t.isBottom){if(e.isNext||e.scroll>t.top)return;e.scroll=t.top,e.isNext=!0,setTimeout(()=>{c(e.page+10)},10)}}function k(){document.onkeydown=t=>{var s=document.all?window.event:t;s.keyCode==13&&c(10)}}function c(t=10){e.isBotom||(u.spinner.show(),m.invoke("baidu-video",{serchText:e.serchText,page:e.page}).then(s=>{var n,r;if(console.log(s),u.spinner.close(),!String(s)){e.isNext=!0;return}e.isNext=!1,(r=(n=s.data)==null?void 0:n.videoList)!=null&&r.length&&(e.page=t);let d=s.data.videoList.filter(i=>!["xsp","ad","rs"].includes(i.dataType)&&(i.videoSrc||i.mp4b_url)&&!e.list.some(T=>T.vid==i.vid));e.list=[].concat(e.list).concat(d.map(i=>({image:i.imgSrc,src:i.videoSrc||i.mp4b_url,title:i.originTitle,duration:i.duration,vid:i.vid,type:i.dataType,heji:i.dataType=="heji"&&_(decodeURIComponent(i.strongUrlParams.sfUrl))||{},count:i.number||0})))}))}function w(){e.serchText="",e.page=1,e.list=[],e.isBotom=!1,e.scroll=0,e.isNext=!1}function j(){c(e.page+10)}return(t,s)=>{const d=L("scroll");return l(),a("div",M,[o("div",z,[o("span",J,"视频资料("+p(e.list.length)+"个视频)",1)]),o("div",K,[o("div",O,[B(o("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>e.serchText=n),onKeydown:k,class:"h-all flex-1 fs-16",placeholder:"在此输入视频资料名称",type:"text"},null,544),[[V,e.serchText]]),e.isLoad?(l(),a("div",A,s[1]||(s[1]=[o("img",{class:"w-20",src:F,alt:""},null,-1)]))):f("",!0),e.serchText?(l(),a("span",{key:1,onClick:w,class:"iconfont hand nodarg icon-qingkong mr15 fs-24"})):f("",!0),o("div",{onClick:x,class:"pl11 pr11 pt6 pb6 ra-5 hand fs-15 fc-fff bc-primary"},s[2]||(s[2]=[o("span",{class:"iconfont fb hand fs-16 mr10 icon-search"},null,-1),$("搜索")])),e.list.length?(l(),a("div",{key:2,onClick:j,class:"pl11 pr11 pt6 pb6 ra-5 hand fs-15 fc-fff ml10 bc-primary"},"下一页")):f("",!0)])]),o("div",G,[U(d,{onScroll:v},{default:D(()=>[o("div",H,[(l(!0),a(I,null,P(e.list,n=>(l(),a("div",{onClick:r=>b(n),style:q({backgroundImage:`url('${n.image}')`}),class:"wb-32 bs-c nodarg hand rel hidden sha-6 mt10 ra-5 mr10 bp-all h-250"},[o("div",W,p(n.title),1),o("span",X,p(n.duration),1),s[3]||(s[3]=o("span",{class:"iconfont fs-33 icon-mv fc-fff abs absc"},null,-1)),n.type=="heji"?(l(),a("span",{key:0,onClick:E(r=>y(n),["stop"]),class:"abs ar10 pp7 ab10 ba-5 ra-5 fc-fff"},"合集",8,Y)):f("",!0)],12,Q))),256))])]),_:1})]),s[4]||(s[4]=o("div",{class:"h-15"},null,-1))])}}});export{te as default};
